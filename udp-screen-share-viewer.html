<!DOCTYPE html>
<html>
<head>
  <title>UDP Screen Sharing Viewer</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
    }

    #screen-container {
      max-width: 80%;
      max-height: 80%;
      overflow: hidden;
    }

    #screen-image {
      max-width: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
  <div id="screen-container">
    <img id="screen-image" src="/api/placeholder/800/600" alt="Screen Capture">
  </div>

  <script>
    const screenImage = document.getElementById('screen-image');

    function fetchScreenCapture() {
      fetch('http://localhost:8080/api/screen-capture')
        .then(response => response.blob())
        .then(blob => {
          const imageUrl = URL.createObjectURL(blob);
          screenImage.src = imageUrl;
          requestAnimationFrame(fetchScreenCapture);
        })
        .catch(error => {
          console.error('Error fetching screen capture:', error);
          setTimeout(fetchScreenCapture, 1000); // Retry after 1 second
        });
    }

    fetchScreenCapture();
  </script>
</body>
</html>
